extends layout

block content
  body
    h1 Book: #{books.title}
    form
      p
        label(for='title') Title
        input#title(type='text', value= books.title)
      p
        label(for='author') Author
        input#author(type='text', value= books.author)
      p
        label(for='genre') Genre
        input#genre(type='text', value= books.genre)
      p
        label(for='first_published') First Published
        input#first_published(type='text', value= books.first_published)
      p
        input(type='submit', value='Update')
    h2 Loan History
    table
      thead
        tr
          th Book
          th Patron 
          th Loaned on
          th Return by 
          th Returned on
          th Action
      tbody
        each loan in books.Loans
          tr
            td
              a(href='/all_books/'+loan.Book.id)=loan.Book.title
            td
              a(href='/all_patrons/'+loan.Patron.id)=loan.Patron.first_name+' '+loan.Patron.last_name
            td=loan.loaned_on
            td=loan.return_by
            td=loan.returned_on
            if !loan.returned_on
              td
                a(href='/return_book/'+loan.book_id class='button') Return Book

